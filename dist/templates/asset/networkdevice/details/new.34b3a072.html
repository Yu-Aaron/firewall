<h2 class="title-page-main">新建网络设备</h2>

<div class="modal-body-frame">
  <div class="modal-container">
    <div class="row">
      <div class="col-md-6">
        <form name="form" class="form-horizontal" role="form">
          <div class="form-group">
            <label for="new-device-name" class="col-md-3 control-label"><span class="text-red">&#42;</span>设备名称</label>
            <div class="col-md-9">
              <input name='name' type="text" autofocus class="form-control" id="new-device-name" ng-model="device.name"
                     ng-change="newDevice.validateDevice()" maxlength="100">
              <error-msg ng-show="form.name.$dirty" validator="newDevice" obj="device" type="'name'"></error-msg>
            </div>
          </div>
          <div class="form-group">
            <label for="new-device-serial" class="col-md-3 control-label">设备序列号</label>
            <div class="col-md-9">
              <input type="text" class="form-control" id="new-device-serial" ng-model="device.serialNumber"
                     maxlength="255" ng-change="newDevice.serialNumberChanged()">
              <error-msg obj="device" validator="newDevice" type="'serialNumber'"></error-msg>
            </div>
          </div>
          <div class="form-group" ng-hide="true">
            <div class="col-md-9">
              <div class="select-styled">
                <select id="new-device-type" class="form-control" ng-init="device.category = 'NETWORK_DEVICE'"
                        ng-model="device.category" ng-options="type | deviceCategoryFilter for type in forms.category"
                        disabled></select>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="new-device-working-mode" class="col-md-3 control-label"><span class="text-red">&#42;</span>设备类型</label>
            <div class="col-md-9">
              <div class="select-styled">
                <select id="new-device-working-mode" class="form-control" ng-model="device.modename"
                        ng-options="item.modename for item in forms.modes" ng-change="newDevice.modeChange()">
                </select>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="device-model-list" class="col-md-3 control-label"><span
              class="text-red">&#42;</span>设备型号</label>
            <div class="col-md-9">
              <div class="select-styled input-stacked">
                <div class="input-stacked-wrap" ng-show="newDevice.newModel">
                  <input class="form-control" ng-show="newDevice.newModel" type="text" placeholder="请输入设备型号名称"
                         ng-model="device.modelname" ng-change="newDevice.validateDevice()" maxlength="255">
                </div>
                <select id="device-model-list" class="form-control" ng-model="device.modelname"
                        ng-options="item.modelId as (item.model_name + (item.model && (item.model !== item.model_name) ? ' / ' + item.model : '')) for item in forms.models"
                        ng-change="newDevice.modelChange(device.modelname)">
                </select>
              </div>
            </div>
          </div>
          <div class="form-group" ng-show="newDevice.newModel && false">
            <label for="new-device-model" class="col-md-3 control-label">型号</label>
            <div class="col-md-9">
              <input type="text" class="form-control" id="new-device-model" ng-show="newDevice.newModel"
                     ng-model="device.model" ng-change="newDevice.validateDevice()" maxlength="255">
            </div>
          </div>
          <div class="form-group">
            <label for="new-device-model-make" class="col-md-3 control-label">设备厂商</label>
            <div class="col-md-9">
              <label style="margin-top: 7px" ng-hide="newDevice.newModel">{{device.modelmake || '未知'}}</label>
              <input type="text" class="form-control" id="new-device-model-make" ng-show="newDevice.newModel"
                     ng-model="device.modelmake" maxlength="255">
            </div>
          </div>
          <div class="form-group" ng-hide="true">
            <label for="new-device-model-protocol" class="col-md-3 control-label">设备协议</label>
            <div class="col-md-9">
              <label style="margin-top: 7px" ng-hide="newDevice.newModel">{{device.modelprotocol || '未知'}}</label>
              <input type="text" class="form-control" id="new-device-model-protocol" ng-show="newDevice.newModel"
                     ng-model="device.modelprotocol" maxlength="255">
            </div>
          </div>
          <div class="form-group" ng-hide="true">
            <label for="new-device-model-version" class="col-md-3 control-label">软件版本</label>
            <div class="col-md-9">
              <label style="margin-top: 7px" ng-hide="newDevice.newModel">{{device.modelversion || '未知'}}</label>
              <input type="text" class="form-control" id="new-device-model-version" ng-show="newDevice.newModel"
                     ng-model="device.modelversion" maxlength="255">
            </div>
          </div>
          <div class="form-group" ng-hide="true">
            <label for="new-device-model-firmware" class="col-md-3 control-label">硬件版本</label>
            <div class="col-md-9">
              <label style="margin-top: 7px" ng-hide="newDevice.newModel">{{device.modelfirmware || '未知'}}</label>
              <input type="text" class="form-control" id="new-device-model-firmware" ng-show="newDevice.newModel"
                     ng-model="device.modelfirmware" maxlength="255">
            </div>
          </div>
          <div class="form-group" ng-hide="true">
            <label for="new-device-model-serial" class="col-md-3 control-label">型号序列</label>
            <div class="col-md-9">
              <label style="margin-top: 7px" ng-hide="newDevice.newModel">{{device.modelserial || '未知'}}</label>
              <input type="text" class="form-control" id="new-device-model-serial" ng-show="newDevice.newModel"
                     ng-model="device.modelserial" maxlength="255">
            </div>
          </div>
          <div class="form-group">
            <label for="new-device-model-memo" class="col-md-3 control-label">备注</label>
            <div class="col-md-9">
              <label style="margin-top: 7px" ng-hide="newDevice.newModel">{{device.modelmemo || '未知'}}</label>
              <input type="text" class="form-control" id="new-device-model-memo" ng-show="newDevice.newModel"
                     ng-model="device.modelmemo" maxlength="255">
            </div>
          </div>
          <div class="form-group" ng-show="device.mode === 'ROUTER'">
            <label for="new-device-ip" class="col-md-3 control-label">IP地址</label>
            <div class="col-md-9">
              <input name="ip" type="text" class="form-control" id="new-device-ip" ng-model="device.ip"
                     ng-change="newDevice.validateDevice()" maxlength="255">
              <error-msg ng-show="form.ip.$dirty" validator="newDevice" obj="device" type="'ip'"></error-msg>
            </div>
          </div>
          <div class="form-group" ng-show="device.mode === 'ROUTER'">
            <label for="new-device-mac" class="col-md-3 control-label">MAC地址</label>
            <div class="col-md-9">
              <input name="mac" type="text" class="form-control" id="new-device-mac" ng-model="device.mac"
                     ng-change="newDevice.validateDevice()" maxlength="255">
              <error-msg ng-show="form.mac.$dirty" validator="newDevice" obj="device" type="'mac'"></error-msg>
            </div>
          </div>
          <div class="form-group" ng-show="false">
            <label for="new-device-portsNumber" class="col-md-3 control-label">端口数量</label>
            <div class="col-md-9">
              <input type="text" class="form-control" id="new-device-portsNumber" ng-model="device.portsNumber">
            </div>
          </div>
          <div class="form-group" ng-show="false">
            <label for="new-device-hasusb" class="col-md-3 control-label">USB接口</label>
            <div class="col-md-9">
              <input type="checkbox" id="new-device-hasusb" ng-model="device.hasUSB"/>
            </div>
          </div>
          <div class="form-group" ng-show="false">
            <label for="new-device-haswireless" class="col-md-3 control-label">无线网卡</label>
            <div class="col-md-9">
              <input type="checkbox" id="new-device-haswireless" ng-model="device.hasWireless"/>
            </div>
          </div>
          <div class="form-group" ng-show="false">
            <label for="new-device-hasport" class="col-md-3 control-label">网络端口</label>
            <div class="col-md-9">
              <input type="checkbox" id="new-device-hasport" ng-model="device.hasPort"/>
            </div>
          </div>
        </form>
      </div>
      <div class="col-md-6">
        <div class="panel panel-device">
          <div class="panel-body">
            <img ng-src="/images/{{device.iconType ? device.iconType : 'unknown-device'}}-icon.png" width="200"/>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- MODAL FOOTER -->
<div class="modal-footer">
  <a ui-sref="asset.networkdevice" class="btn btn-default"><i class="fa fa-times icon-left"></i>取消</a>
  <button class="btn btn-default" ng-click="newDevice.done()"
          ng-disabled="newDevice.nameError || newDevice.hasDuplicateSN || newDevice.modelError || newDevice.modeError || (newDevice.invalidIp && device.mode === 'ROUTER') || (newDevice.invalidMac && device.mode === 'ROUTER') || ((newDevice.hasDuplicateIP || newDevice.hasDuplicateMAC || newDevice.invalidRange) && device.mode === 'ROUTER')">
    <i class="fa fa-check icon-left" style="color:#76B900"></i>完成
  </button>
</div>
